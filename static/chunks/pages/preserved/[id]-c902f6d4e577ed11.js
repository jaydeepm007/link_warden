(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[189],{2595:function(e,l,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/preserved/[id]",function(){return t(4893)}])},4699:function(e,l,t){"use strict";t.d(l,{Z:function(){return j}});var n=t(5893),a=t(9401),i=t(326),r=t(2602),o=t(7102),c=t(269),s=t(7856),d=t.n(s),u=t(5675),m=t.n(u),v=t(1664),f=t.n(v),x=t(1163),h=t(7294),p=t(9609),g=t(8276),b=t(7179),N=t(6496);function j(e){var l,t;let{link:s}=e,{t:u}=(0,g.$G)(),[v,j]=(0,h.useState)(),[w,y]=(0,h.useState)(!1),[k,_]=(0,h.useState)(),[E,S]=(0,h.useState)(),L=new c.Z,G=(0,x.useRouter)(),q=(0,N.mk)(),{data:I=[]}=(0,b.bX)(),Z=(0,h.useMemo)(()=>I.find(e=>e.id===s.collection.id),[I,s]);(0,h.useEffect)(()=>{let e=async()=>{if(G.query.id&&(0,i.Ji)(s)){let e=await fetch("/api/v1/archives/".concat(null==s?void 0:s.id,"?format=").concat(o.Gt.readability)),l=await (null==e?void 0:e.json());j(l)}};e(),S(s.importDate||s.createdAt)},[s]),(0,h.useEffect)(()=>{let e;return s&&q.mutateAsync(null==s?void 0:s.id),!s||(null==s?void 0:s.image)!=="pending"&&(null==s?void 0:s.pdf)!=="pending"&&(null==s?void 0:s.readable)!=="pending"&&(null==s?void 0:s.monolith)!=="pending"&&(null==s?void 0:s.image)&&(null==s?void 0:s.pdf)&&(null==s?void 0:s.readable)&&(null==s?void 0:s.monolith)?e&&clearInterval(e):e=setInterval(()=>q.mutateAsync(s.id),5e3),()=>{e&&clearInterval(e)}},[null==s?void 0:s.image,null==s?void 0:s.pdf,null==s?void 0:s.readable,null==s?void 0:s.monolith]);let z=(e,l,t)=>"#"+[e,l,t].map(e=>{let l=e.toString(16);return 1===l.length?"0"+l:l}).join("");return(0,h.useEffect)(()=>{let e=document.getElementById("link-banner"),l=document.getElementById("link-banner-inner");k&&e&&l&&(k[0]&&k[1]&&(e.style.background="linear-gradient(to bottom, ".concat(z(k[0][0],k[0][1],k[0][2]),"20, ").concat(z(k[1][0],k[1][1],k[1][2]),"20)")),k[2]&&k[3]&&(l.style.background="linear-gradient(to bottom, ".concat(z(k[2][0],k[2][1],k[2][2]),"30, ").concat(z(k[3][0],k[3][1],k[3][2]),")30")))},[k]),(0,n.jsxs)("div",{className:"flex flex-col max-w-screen-md h-full mx-auto p-5",children:[(0,n.jsxs)("div",{id:"link-banner",className:"link-banner relative bg-opacity-10 border-neutral-content p-3 border mb-3",children:[(0,n.jsx)("div",{id:"link-banner-inner",className:"link-banner-inner"}),(0,n.jsxs)("div",{className:"flex flex-col gap-3 items-start",children:[(0,n.jsxs)("div",{className:"flex gap-3 items-start",children:[!w&&(null==s?void 0:s.url)&&(0,n.jsx)(m(),{src:"https://t2.gstatic.com/faviconV2?client=SOCIAL&type=FAVICON&fallback_opts=TYPE,SIZE,URL&url=".concat(s.url,"&size=32"),width:42,height:42,alt:"",id:"favicon-"+s.id,className:"bg-white shadow rounded-md p-1 select-none mt-1",draggable:"false",onLoad:e=>{try{let l=L.getPalette(e.target,4);_(l)}catch(e){console.log(e)}},onError:e=>{y(!0)}}),(0,n.jsxs)("div",{className:"flex flex-col",children:[(0,n.jsx)("p",{className:"text-xl pr-10",children:(0,a.Z)((null==s?void 0:s.name)||(null==s?void 0:s.description)||(null==s?void 0:s.url)||"")}),(null==s?void 0:s.url)?(0,n.jsxs)(f(),{href:(null==s?void 0:s.url)||"",title:null==s?void 0:s.url,target:"_blank",className:"hover:opacity-60 duration-100 break-all text-sm flex items-center gap-1 text-neutral w-fit",children:[(0,n.jsx)("i",{className:"bi-link-45deg"}),(0,r.Z)((null==s?void 0:s.url)||"")?new URL(null==s?void 0:s.url).host:void 0]}):void 0]})]}),(0,n.jsxs)("div",{className:"flex gap-1 items-center flex-wrap",children:[(0,n.jsxs)(f(),{href:"/collections/".concat(null==s?void 0:s.collection.id),className:"flex items-center gap-1 cursor-pointer hover:opacity-60 duration-100 mr-2 z-10",children:[(0,n.jsx)("i",{className:"bi-folder-fill drop-shadow text-2xl",style:{color:null==s?void 0:s.collection.color}}),(0,n.jsx)("p",{title:null==s?void 0:s.collection.name,className:"text-lg truncate max-w-[12rem]",children:null==s?void 0:s.collection.name})]}),null==s?void 0:null===(l=s.tags)||void 0===l?void 0:l.map((e,l)=>(0,n.jsx)(f(),{href:"/tags/".concat(e.id),className:"z-10",children:(0,n.jsxs)("p",{title:e.name,className:"btn btn-xs btn-ghost truncate max-w-[19rem]",children:["#",e.name]})},l))]}),(0,n.jsx)("p",{className:"min-w-fit text-sm text-neutral",children:E?new Date(E).toLocaleString("en-US",{year:"numeric",month:"long",day:"numeric"}):void 0}),(null==s?void 0:s.name)?(0,n.jsx)("p",{children:(0,a.Z)(null==s?void 0:s.description)}):void 0]}),(0,n.jsx)(p.Z,{link:s,collection:Z,position:"top-3 right-3",alignToTop:!0})]}),(0,n.jsx)("div",{className:"flex flex-col gap-5 h-full",children:(null==s?void 0:null===(t=s.readable)||void 0===t?void 0:t.startsWith("archives"))?(0,n.jsx)("div",{className:"line-break px-1 reader-view",dangerouslySetInnerHTML:{__html:d().sanitize((null==v?void 0:v.content)||"")||""}}):(0,n.jsxs)("div",{className:"w-full h-full flex flex-col justify-center p-10 ".concat((null==s?void 0:s.readable)!=="pending"&&(null==s?void 0:s.readable)?"":"skeleton"),children:[(0,n.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",className:"w-1/4 min-w-[7rem] max-w-[15rem] h-auto mx-auto mb-5",viewBox:"0 0 16 16",children:[(0,n.jsx)("path",{d:"m14.12 10.163 1.715.858c.22.11.22.424 0 .534L8.267 15.34a.598.598 0 0 1-.534 0L.165 11.555a.299.299 0 0 1 0-.534l1.716-.858 5.317 2.659c.505.252 1.1.252 1.604 0l5.317-2.66zM7.733.063a.598.598 0 0 1 .534 0l7.568 3.784a.3.3 0 0 1 0 .535L8.267 8.165a.598.598 0 0 1-.534 0L.165 4.382a.299.299 0 0 1 0-.535L7.733.063z"}),(0,n.jsx)("path",{d:"m14.12 6.576 1.715.858c.22.11.22.424 0 .534l-7.568 3.784a.598.598 0 0 1-.534 0L.165 7.968a.299.299 0 0 1 0-.534l1.716-.858 5.317 2.659c.505.252 1.1.252 1.604 0l5.317-2.659z"})]}),(0,n.jsx)("p",{className:"text-center text-2xl",children:u("link_preservation_in_queue")}),(0,n.jsx)("p",{className:"text-center text-lg mt-2",children:u("check_back_later")})]})})]})}},4893:function(e,l,t){"use strict";t.r(l),t.d(l,{__N_SSP:function(){return s},default:function(){return d}});var n=t(5893),a=t(7294),i=t(1163),r=t(7102),o=t(4699),c=t(6496),s=!0;function d(){let{links:e}=(0,c.u8)(),l=(0,c.mk)(),[t,s]=(0,a.useState)(),d=(0,i.useRouter)();return(0,a.useEffect)(()=>{let e=async()=>{d.query.id&&await l.mutateAsync(Number(d.query.id))};e()},[]),(0,a.useEffect)(()=>{e&&e[0]&&s(e.find(e=>e.id===Number(d.query.id)))},[e]),(0,n.jsxs)("div",{className:"relative",children:[t&&Number(d.query.format)===r.Gt.readability&&(0,n.jsx)(o.Z,{link:t}),t&&Number(d.query.format)===r.Gt.monolith&&(0,n.jsx)("iframe",{src:"/api/v1/archives/".concat(t.id,"?format=").concat(r.Gt.monolith),className:"w-full h-screen border-none"}),t&&Number(d.query.format)===r.Gt.pdf&&(0,n.jsx)("iframe",{src:"/api/v1/archives/".concat(t.id,"?format=").concat(r.Gt.pdf),className:"w-full h-screen border-none"}),t&&Number(d.query.format)===r.Gt.png&&(0,n.jsx)("img",{alt:"",src:"/api/v1/archives/".concat(t.id,"?format=").concat(r.Gt.png),className:"w-fit mx-auto"}),t&&Number(d.query.format)===r.Gt.jpeg&&(0,n.jsx)("img",{alt:"",src:"/api/v1/archives/".concat(t.id,"?format=").concat(r.Gt.jpeg),className:"w-fit mx-auto"})]})}}},function(e){e.O(0,[664,675,584,832,280,598,283,774,888,179],function(){return e(e.s=2595)}),_N_E=e.O()}]);