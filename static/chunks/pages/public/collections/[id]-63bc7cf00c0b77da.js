(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[857],{7273:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/public/collections/[id]",function(){return n(1667)}])},5130:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var a=n(5893),s=n(7294),r=n(5675),l=n.n(r);function i(e){let{src:t,className:n,priority:r,name:i,large:o}=e,[c,u]=(0,s.useState)("");return(0,s.useEffect)(()=>{!t||(null==t?void 0:t.includes("base64"))||t.startsWith("http")?t?u(t):u(""):u("/api/v1/".concat(t.replace("uploads/","").replace(".jpg","")))},[t]),c?(0,a.jsx)("div",{className:"avatar skeleton rounded-full drop-shadow-md ".concat(n||""," ").concat(o?"w-28 h-28":"w-8 h-8"),children:(0,a.jsx)("div",{className:"rounded-full w-full h-full ring-2 ring-neutral-content",children:(0,a.jsx)(l(),{alt:"",src:c,height:112,width:112,priority:r,draggable:!1,onError:()=>u(""),className:"aspect-square rounded-full"})})}):(0,a.jsx)("div",{className:"avatar drop-shadow-md placeholder ".concat(n||""," ").concat(o?"w-28 h-28":"w-8 h-8"),children:(0,a.jsx)("div",{className:"bg-base-100 text-neutral rounded-full w-full h-full ring-2 ring-neutral-content select-none",children:i?(0,a.jsx)("span",{className:"text-2xl capitalize",children:i.slice(0,1)}):(0,a.jsx)("i",{className:"bi-person ".concat(o?"text-5xl":"text-xl")})})})}},2948:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var a=n(5893),s=n(7294),r=n(1163),l=n(6501);function i(e){let{placeholder:t}=e,n=(0,r.useRouter)(),[i,o]=(0,s.useState)("");return(0,s.useEffect)(()=>{n.query.q?o(decodeURIComponent(n.query.q)):o("")},[n.query.q]),(0,a.jsxs)("div",{className:"flex items-center relative group",children:[(0,a.jsx)("label",{htmlFor:"search-box",className:"inline-flex items-center w-fit absolute left-1 pointer-events-none rounded-md p-1 text-primary",children:(0,a.jsx)("i",{className:"bi-search"})}),(0,a.jsx)("input",{id:"search-box",type:"text",placeholder:t||"Search for Links",value:i,onChange:e=>{e.target.value.includes("%")&&l.Am.error("The search query should not contain '%'."),o(e.target.value.replace("%",""))},onKeyDown:e=>{if("Enter"===e.key)return n.pathname.startsWith("/public")?i?n.push("/public/collections/"+n.query.id+"?q="+encodeURIComponent(i||"")):n.push("/public/collections/"+n.query.id):n.push("/search?q="+encodeURIComponent(i))},className:"border border-neutral-content bg-base-200 focus:border-primary py-1 rounded-md pl-9 pr-2 w-full max-w-[15rem] md:focus:w-80 md:w-[15rem] md:max-w-full duration-200 outline-none"})]})}},1566:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var a=n(5893),s=n(7472),r=n(7294),l=n(8276);function i(e){let{className:t}=e,{t:n}=(0,l.$G)(),{settings:i,updateSettings:o}=(0,s.Z)(),[c,u]=(0,r.useState)(localStorage.getItem("theme"));return(0,r.useEffect)(()=>{o({theme:c})},[c]),(0,a.jsx)("div",{className:"tooltip tooltip-bottom","data-tip":n("switch_to",{theme:"light"===i.theme?"Dark":"Light"}),children:(0,a.jsxs)("label",{className:"swap swap-rotate btn-square text-neutral btn btn-ghost btn-sm ".concat(t),children:[(0,a.jsx)("input",{type:"checkbox",onChange:e=>{u(e.target.checked?"dark":"light")},className:"theme-controller",checked:"light"!==localStorage.getItem("theme")}),(0,a.jsx)("i",{className:"bi-sun-fill text-xl swap-on"}),(0,a.jsx)("i",{className:"bi-moon-fill text-xl swap-off"})]})})}},1667:function(e,t,n){"use strict";n.r(t),n.d(t,{__N_SSP:function(){return S},default:function(){return C}});var a=n(5893);let s=async e=>{let t=await fetch("/api/v1/public/collections/"+e);if(400===t.status)return{response:"Collection not found.",status:400};let n=await t.json();return n};var r=n(7102),l=n(1163),i=n(7294),o=n(9008),c=n.n(o),u=n(5130),d=n(1566),m=n(1256),h=n(5675),p=n.n(h),f=n(1664),x=n.n(f),g=n(7472),v=n(2948),y=n(4128),b=n(8276),w=n(148),j=n(9726);let N=function(){var e,t,n,a,s;let r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=(0,l.useRouter)(),c={sort:null!==(t=null!==(e=r.sort)&&void 0!==e?e:Number(window.localStorage.getItem("sortBy")))&&void 0!==t?t:0,collectionId:null!==(n=r.collectionId)&&void 0!==n?n:o.query.id,tagId:(null!==(a=r.tagId)&&void 0!==a?a:"/tags/[id]"===o.pathname)?o.query.id:void 0,pinnedOnly:(null!==(s=r.pinnedOnly)&&void 0!==s?!!s:"/links/pinned"===o.pathname)||void 0,searchQueryString:r.searchQueryString,searchByName:r.searchByName,searchByUrl:r.searchByUrl,searchByDescription:r.searchByDescription,searchByTextContent:r.searchByTextContent,searchByTags:r.searchByTags},u=k(c),{data:d,...m}=_(u),h=(0,i.useMemo)(()=>null==d?void 0:d.pages.reduce((e,t)=>[...e,...t],[]),[d]);return{links:h,data:{...d,...m}}},_=e=>(0,j.N)({queryKey:["links",{params:e}],queryFn:async e=>{let t=await fetch("/api/v1/public/collections/links?cursor="+e.pageParam+(e.queryKey[1].params?"&"+e.queryKey[1].params:"")),n=await t.json();return n.response},initialPageParam:0,refetchOnWindowFocus:!1,getNextPageParam:e=>{if(0!==e.length)return e.at(-1).id}}),k=e=>Object.keys(e).filter(t=>void 0!==e[t]).map(t=>"".concat(encodeURIComponent(t),"=").concat(encodeURIComponent(e[t]))).join("&");var q=n(1821),S=!0;function C(){var e,t,n,o;let{t:h}=(0,b.$G)(),{settings:f}=(0,g.Z)(),j=(0,l.useRouter)(),[_,k]=(0,i.useState)({id:null,name:"",username:"",image:"",archiveAsScreenshot:void 0,archiveAsMonolith:void 0,archiveAsPDF:void 0}),[S,C]=(0,i.useState)({name:!0,url:!0,description:!0,tags:!0,textContent:!1}),[B,I]=(0,i.useState)(null!==(o=Number(localStorage.getItem("sortBy")))&&void 0!==o?o:r.PE.DateNewestFirst),{links:E,data:Z}=N({sort:B,searchQueryString:j.query.q?decodeURIComponent(j.query.q):void 0,searchByName:S.name,searchByUrl:S.url,searchByDescription:S.description,searchByTextContent:S.textContent,searchByTags:S.tags}),[P,R]=(0,i.useState)();(0,i.useEffect)(()=>{j.query.id&&s(Number(j.query.id)).then(e=>{400===e.status?j.push("/dashboard"):R(e.response)})},[]),(0,i.useEffect)(()=>{P&&(0,m.Z)(P.ownerId).then(e=>k(e))},[P]);let[T,U]=(0,i.useState)(!1),[D,F]=(0,i.useState)(localStorage.getItem("viewMode")||r.wO.Card);return P?(0,a.jsxs)("div",{className:"h-96",style:{backgroundImage:"linear-gradient(".concat(null==P?void 0:P.color,"30 10%, ").concat("dark"===f.theme?"#262626":"#f3f4f6"," 13rem, ").concat("dark"===f.theme?"#171717":"#ffffff"," 100%)")},children:[P?(0,a.jsxs)(c(),{children:[(0,a.jsxs)("title",{children:[P.name," | Linkwarden"]}),(0,a.jsx)("meta",{property:"og:title",content:"".concat(P.name," | Linkwarden")},"title")]}):void 0,(0,a.jsxs)("div",{className:"lg:w-3/4 w-full mx-auto p-5 bg",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("p",{className:"text-4xl font-thin mb-2 capitalize mt-10",children:P.name}),(0,a.jsxs)("div",{className:"flex gap-2 items-center mt-8 min-w-fit",children:[(0,a.jsx)(d.Z,{}),(0,a.jsx)(x(),{href:"https://linkwarden.app/",target:"_blank",children:(0,a.jsx)(p(),{src:"/icon.png",width:551,height:551,alt:"Linkwarden",title:h("list_created_with_linkwarden"),className:"h-8 w-fit mx-auto rounded"})})]})]}),(0,a.jsx)("div",{className:"mt-3",children:(0,a.jsx)("div",{className:"min-w-[15rem]",children:(0,a.jsxs)("div",{className:"flex gap-1 justify-center sm:justify-end items-center w-fit",children:[(0,a.jsxs)("div",{className:"flex items-center btn px-2 btn-ghost rounded-full",onClick:()=>U(!0),children:[_.id?(0,a.jsx)(u.Z,{src:_.image||void 0,name:_.name}):void 0,P.members.sort((e,t)=>e.userId-t.userId).map((e,t)=>(0,a.jsx)(u.Z,{src:e.user.image?e.user.image:void 0,className:"-ml-3",name:e.user.name},t)).slice(0,3),P.members.length-3>0?(0,a.jsx)("div",{className:"avatar drop-shadow-md placeholder -ml-3",children:(0,a.jsx)("div",{className:"bg-base-100 text-neutral rounded-full w-8 h-8 ring-2 ring-neutral-content",children:(0,a.jsxs)("span",{children:["+",P.members.length-3]})})}):null]}),(0,a.jsx)("p",{className:"text-neutral text-sm",children:P.members.length>0&&1===P.members.length?h("by_author_and_other",{author:_.name,count:P.members.length}):P.members.length>0&&1!==P.members.length?h("by_author_and_others",{author:_.name,count:P.members.length}):h("by_author",{author:_.name})})]})})}),(0,a.jsx)("p",{className:"mt-5",children:P.description}),(0,a.jsx)("div",{className:"divider mt-5 mb-0"}),(0,a.jsxs)("div",{className:"flex mb-5 mt-10 flex-col gap-5",children:[(0,a.jsx)(w.Z,{t:h,viewMode:D,setViewMode:F,sortBy:B,setSortBy:I,searchFilter:S,setSearchFilter:C,children:(0,a.jsx)(v.Z,{placeholder:(null===(e=P._count)||void 0===e?void 0:e.links)===1?h("search_count_link",{count:null===(t=P._count)||void 0===t?void 0:t.links}):h("search_count_links",{count:null===(n=P._count)||void 0===n?void 0:n.links})})}),(0,a.jsx)(q.ZP,{links:null==E?void 0:E.map((e,t)=>{let n={...e,collection:P};return n}),layout:D,placeholderCount:1,useData:Z}),!Z.isLoading&&E&&!E[0]&&(0,a.jsx)("p",{children:h("nothing_found")})]})]}),T?(0,a.jsx)(y.Z,{onClose:()=>U(!1),activeCollection:P}):void 0]}):(0,a.jsx)(a.Fragment,{})}}},function(e){e.O(0,[664,675,584,832,385,463,598,283,907,7,128,774,888,179],function(){return e(e.s=7273)}),_N_E=e.O()}]);