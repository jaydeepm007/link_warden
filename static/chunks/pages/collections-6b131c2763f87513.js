(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[564],{3256:function(e,s,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/collections",function(){return t(8937)}])},6279:function(e,s,t){"use strict";t.d(s,{Z:function(){return u}});var l=t(5893),a=t(7294),n=t(4157),i=t(1163),r=t(2980),o=t(7169),c=t(7199),d=t(8276),m=t(7179),x=t(6501);function u(e){let{onClose:s,activeCollection:t}=e,{t:u}=(0,d.$G)(),[h,p]=(0,a.useState)(t),[b,j]=(0,a.useState)(!1),v=(0,i.useRouter)(),[f,g]=(0,a.useState)(""),N=(0,r.Z)(h.id);(0,a.useEffect)(()=>{p(t)},[]);let w=(0,m.Do)(),_=async()=>{if((!0!==N||h.name===f)&&!b){if(j(!0),!h)return null;j(!0);let e=x.ZP.loading(u("deleting_collection"));w.mutateAsync(h.id,{onSettled:(t,l)=>{x.ZP.dismiss(e),l?x.ZP.error(l.message):(s(),x.ZP.success(u("deleted")),v.push("/collections"))}}),j(!1)}};return(0,l.jsxs)(o.Z,{toggleModal:s,children:[(0,l.jsx)("p",{className:"text-xl font-thin text-red-500",children:!0===N?u("delete_collection"):u("leave_collection")}),(0,l.jsx)("div",{className:"divider mb-3 mt-1"}),(0,l.jsxs)("div",{className:"flex flex-col gap-3",children:[!0===N?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("p",{children:u("confirm_deletion_prompt",{name:h.name})}),(0,l.jsx)(n.Z,{value:f,onChange:e=>g(e.target.value),placeholder:u("type_name_placeholder",{name:h.name}),className:"w-3/4 mx-auto"}),(0,l.jsxs)("div",{role:"alert",className:"alert alert-warning",children:[(0,l.jsx)("i",{className:"bi-exclamation-triangle text-xl"}),(0,l.jsxs)("span",{children:[(0,l.jsxs)("b",{children:[u("warning"),": "]}),u("deletion_warning")]})]})]}):(0,l.jsx)("p",{children:u("leave_prompt")}),(0,l.jsxs)(c.Z,{disabled:!0===N&&f!==h.name,onClick:_,intent:"destructive",className:"ml-auto",children:[(0,l.jsx)("i",{className:"bi-trash text-xl"}),!0===N?u("delete"):u("leave")]})]})]})}},377:function(e,s,t){"use strict";t.d(s,{Z:function(){return m}});var l=t(5893),a=t(7294),n=t(4157),i=t(5651),r=t(7169),o=t(8276),c=t(7179),d=t(6501);function m(e){let{onClose:s,activeCollection:t}=e,{t:m}=(0,o.$G)(),[x,u]=(0,a.useState)(t),[h,p]=(0,a.useState)(!1),b=(0,c.vU)(),j=async()=>{if(!h){if(p(!0),!x)return null;p(!0);let e=d.ZP.loading(m("updating_collection"));await b.mutateAsync(x,{onSettled:(t,l)=>{d.ZP.dismiss(e),l?d.ZP.error(l.message):(s(),d.ZP.success(m("updated")))}}),p(!1)}};return(0,l.jsxs)(r.Z,{toggleModal:s,children:[(0,l.jsx)("p",{className:"text-xl font-thin",children:m("edit_collection_info")}),(0,l.jsx)("div",{className:"divider mb-3 mt-1"}),(0,l.jsxs)("div",{className:"flex flex-col gap-3",children:[(0,l.jsxs)("div",{className:"flex flex-col sm:flex-row gap-3",children:[(0,l.jsxs)("div",{className:"w-full",children:[(0,l.jsx)("p",{className:"mb-2",children:m("name")}),(0,l.jsxs)("div",{className:"flex flex-col gap-3",children:[(0,l.jsx)(n.Z,{className:"bg-base-200",value:x.name,placeholder:m("collection_name_placeholder"),onChange:e=>u({...x,name:e.target.value})}),(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"w-full mb-2",children:m("color")}),(0,l.jsxs)("div",{className:"color-picker flex justify-between items-center",children:[(0,l.jsx)(i.gW,{color:x.color,onChange:e=>u({...x,color:e})}),(0,l.jsxs)("div",{className:"flex flex-col gap-2 items-center w-32",children:[(0,l.jsx)("i",{className:"bi-folder-fill text-5xl",style:{color:x.color}}),(0,l.jsx)("div",{className:"btn btn-ghost btn-xs",onClick:()=>u({...x,color:"#0ea5e9"}),children:m("reset")})]})]})]})]})]}),(0,l.jsxs)("div",{className:"w-full",children:[(0,l.jsx)("p",{className:"mb-2",children:m("description")}),(0,l.jsx)("textarea",{className:"w-full h-[13rem] resize-none border rounded-md duration-100 bg-base-200 p-2 outline-none border-neutral-content focus:border-primary",placeholder:m("collection_description_placeholder"),value:x.description,onChange:e=>u({...x,description:e.target.value})})]})]}),(0,l.jsx)("button",{className:"btn btn-accent dark:border-violet-400 text-white w-fit ml-auto",onClick:j,children:m("save_changes")})]})]})}},8202:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});var l=t(5893);function a(e){let{title:s,description:t,icon:a}=e;return(0,l.jsxs)("div",{className:"flex items-center gap-3",children:[(0,l.jsx)("i",{className:"".concat(a," text-primary sm:text-3xl text-2xl drop-shadow")}),(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"text-3xl capitalize font-thin",children:s}),(0,l.jsx)("p",{className:"text-xs sm:text-sm",children:t})]})]})}t(7294)},8590:function(e,s,t){"use strict";t.d(s,{Z:function(){return d}});var l=t(5893),a=t(7294),n=t(7102),i=t(8229),r=t(7472),o=t(6496),c=t(202);function d(e){let{sortBy:s,setSort:t,t:d}=e,{updateSettings:m}=(0,r.Z)(),x=(0,c.NL)();return(0,a.useEffect)(()=>{m({sortBy:s})},[s]),(0,l.jsxs)("div",{className:"dropdown dropdown-bottom dropdown-end",children:[(0,l.jsx)("div",{tabIndex:0,role:"button",onMouseDown:i.Mm,className:"btn btn-sm btn-square btn-ghost border-none",children:(0,l.jsx)("i",{className:"bi-chevron-expand text-neutral text-2xl"})}),(0,l.jsxs)("ul",{className:"dropdown-content z-[30] menu shadow bg-base-200 border border-neutral-content rounded-xl mt-1",children:[(0,l.jsx)("li",{children:(0,l.jsxs)("label",{className:"label cursor-pointer flex justify-start",tabIndex:0,role:"button",children:[(0,l.jsx)("input",{type:"radio",name:"sort-radio",className:"radio checked:bg-primary",checked:s===n.PE.DateNewestFirst,onChange:()=>{(0,o.Sw)(x,["links"]),t(n.PE.DateNewestFirst)}}),(0,l.jsx)("span",{className:"label-text whitespace-nowrap",children:d("date_newest_first")})]})}),(0,l.jsx)("li",{children:(0,l.jsxs)("label",{className:"label cursor-pointer flex justify-start",tabIndex:0,role:"button",children:[(0,l.jsx)("input",{type:"radio",name:"sort-radio",className:"radio checked:bg-primary",checked:s===n.PE.DateOldestFirst,onChange:()=>{(0,o.Sw)(x,["links"]),t(n.PE.DateOldestFirst)}}),(0,l.jsx)("span",{className:"label-text whitespace-nowrap",children:d("date_oldest_first")})]})}),(0,l.jsx)("li",{children:(0,l.jsxs)("label",{className:"label cursor-pointer flex justify-start",tabIndex:0,role:"button",children:[(0,l.jsx)("input",{type:"radio",name:"sort-radio",className:"radio checked:bg-primary",checked:s===n.PE.NameAZ,onChange:()=>{(0,o.Sw)(x,["links"]),t(n.PE.NameAZ)}}),(0,l.jsx)("span",{className:"label-text whitespace-nowrap",children:d("name_az")})]})}),(0,l.jsx)("li",{children:(0,l.jsxs)("label",{className:"label cursor-pointer flex justify-start",tabIndex:0,role:"button",children:[(0,l.jsx)("input",{type:"radio",name:"sort-radio",className:"radio checked:bg-primary",checked:s===n.PE.NameZA,onChange:()=>{(0,o.Sw)(x,["links"]),t(n.PE.NameZA)}}),(0,l.jsx)("span",{className:"label-text whitespace-nowrap",children:d("name_za")})]})}),(0,l.jsx)("li",{children:(0,l.jsxs)("label",{className:"label cursor-pointer flex justify-start",tabIndex:0,role:"button",children:[(0,l.jsx)("input",{type:"radio",name:"sort-radio",className:"radio checked:bg-primary",checked:s===n.PE.DescriptionAZ,onChange:()=>{(0,o.Sw)(x,["links"]),t(n.PE.DescriptionAZ)}}),(0,l.jsx)("span",{className:"label-text whitespace-nowrap",children:d("description_az")})]})}),(0,l.jsx)("li",{children:(0,l.jsxs)("label",{className:"label cursor-pointer flex justify-start",tabIndex:0,role:"button",children:[(0,l.jsx)("input",{type:"radio",name:"sort-radio",className:"radio checked:bg-primary",checked:s===n.PE.DescriptionZA,onChange:()=>{(0,o.Sw)(x,["links"]),t(n.PE.DescriptionZA)}}),(0,l.jsx)("span",{className:"label-text whitespace-nowrap",children:d("description_za")})]})})]})]})}},8937:function(e,s,t){"use strict";t.r(s),t.d(s,{__N_SSP:function(){return Z},default:function(){return k}});var l=t(5893),a=t(1664),n=t.n(a),i=t(7294),r=t(5130),o=t(2980),c=t(7472),d=t(1256),m=t(377),x=t(4128),u=t(6279),h=t(8229),p=t(8276),b=t(2676);function j(e){let{collection:s,className:t}=e,{t:a}=(0,p.$G)(),{settings:j}=(0,c.Z)(),{data:v={}}=(0,b.a)(),f=new Date(s.createdAt).toLocaleString("en-US",{year:"numeric",month:"short",day:"numeric"}),g=(0,o.Z)(s.id),[N,w]=(0,i.useState)({id:null,name:"",username:"",image:"",archiveAsScreenshot:void 0,archiveAsMonolith:void 0,archiveAsPDF:void 0});(0,i.useEffect)(()=>{let e=async()=>{if(s&&s.ownerId!==v.id){let e=await (0,d.Z)(s.ownerId);w(e)}else s&&s.ownerId===v.id&&w({id:v.id,name:v.name,username:v.username,image:v.image,archiveAsScreenshot:v.archiveAsScreenshot,archiveAsMonolith:v.archiveAsMonolith,archiveAsPDF:v.archiveAsPDF})};e()},[s]);let[_,y]=(0,i.useState)(!1),[Z,k]=(0,i.useState)(!1),[P,C]=(0,i.useState)(!1);return(0,l.jsxs)("div",{className:"relative",children:[(0,l.jsxs)("div",{className:"dropdown dropdown-bottom dropdown-end absolute top-3 right-3 z-20",children:[(0,l.jsx)("div",{tabIndex:0,role:"button",onMouseDown:h.Mm,className:"btn btn-ghost btn-sm btn-square text-neutral",children:(0,l.jsx)("i",{className:"bi-three-dots text-xl",title:"More"})}),(0,l.jsxs)("ul",{className:"dropdown-content z-[30] menu shadow bg-base-200 border border-neutral-content rounded-box mt-1",children:[!0===g&&(0,l.jsx)("li",{children:(0,l.jsx)("div",{role:"button",tabIndex:0,onClick:()=>{var e,s;null===(e=null===(s=document)||void 0===s?void 0:s.activeElement)||void 0===e||e.blur(),y(!0)},className:"whitespace-nowrap",children:a("edit_collection_info")})}),(0,l.jsx)("li",{children:(0,l.jsx)("div",{role:"button",tabIndex:0,onClick:()=>{var e,s;null===(e=null===(s=document)||void 0===s?void 0:s.activeElement)||void 0===e||e.blur(),k(!0)},className:"whitespace-nowrap",children:a(!0===g?"share_and_collaborate":"view_team")})}),(0,l.jsx)("li",{children:(0,l.jsx)("div",{role:"button",tabIndex:0,onClick:()=>{var e,s;null===(e=null===(s=document)||void 0===s?void 0:s.activeElement)||void 0===e||e.blur(),C(!0)},className:"whitespace-nowrap",children:a(!0===g?"delete_collection":"leave_collection")})})]})]}),(0,l.jsxs)("div",{className:"flex items-center absolute bottom-3 left-3 z-10 btn px-2 btn-ghost rounded-full",onClick:()=>k(!0),children:[N.id?(0,l.jsx)(r.Z,{src:N.image||void 0,name:N.name}):void 0,s.members.sort((e,s)=>e.userId-s.userId).map((e,s)=>(0,l.jsx)(r.Z,{src:e.user.image?e.user.image:void 0,name:e.user.name,className:"-ml-3"},s)).slice(0,3),s.members.length-3>0?(0,l.jsx)("div",{className:"avatar drop-shadow-md placeholder -ml-3",children:(0,l.jsx)("div",{className:"bg-base-100 text-neutral rounded-full w-8 h-8 ring-2 ring-neutral-content",children:(0,l.jsxs)("span",{children:["+",s.members.length-3]})})}):null]}),(0,l.jsx)(n(),{href:"/collections/".concat(s.id),style:{backgroundImage:"linear-gradient(45deg, ".concat(s.color,"30 10%, ").concat((j.theme,"oklch(var(--b2))")," 50%, ").concat((j.theme,"oklch(var(--b2))")," 100%)")},className:"card card-compact shadow-md hover:shadow-none duration-200 border border-neutral-content",children:(0,l.jsxs)("div",{className:"card-body flex flex-col justify-between min-h-[12rem]",children:[(0,l.jsxs)("div",{className:"flex justify-between",children:[(0,l.jsx)("p",{className:"card-title break-words line-clamp-2 w-full",children:s.name}),(0,l.jsx)("div",{className:"w-8 h-8 ml-10"})]}),(0,l.jsx)("div",{className:"flex justify-end items-center",children:(0,l.jsxs)("div",{className:"text-right",children:[(0,l.jsxs)("div",{className:"font-bold text-sm flex justify-end gap-1 items-center",children:[s.isPublic?(0,l.jsx)("i",{className:"bi-globe2 drop-shadow text-neutral",title:"This collection is being shared publicly."}):void 0,(0,l.jsx)("i",{className:"bi-link-45deg text-lg text-neutral",title:"This collection is being shared publicly."}),s._count&&s._count.links]}),(0,l.jsx)("div",{className:"flex items-center justify-end gap-1 text-neutral",children:(0,l.jsxs)("p",{className:"font-bold text-xs flex gap-1 items-center",children:[(0,l.jsx)("i",{className:"bi-calendar3 text-neutral",title:"This collection is being shared publicly."}),f]})})]})})]})}),_?(0,l.jsx)(m.Z,{onClose:()=>y(!1),activeCollection:s}):void 0,Z?(0,l.jsx)(x.Z,{onClose:()=>k(!1),activeCollection:s}):void 0,P?(0,l.jsx)(u.Z,{onClose:()=>C(!1),activeCollection:s}):void 0]})}var v=t(8465),f=t(3299),g=t(8590),N=t(7102),w=t(6081),_=t(8202),y=t(7179),Z=!0;function k(){var e;let{t:s}=(0,p.$G)(),{data:t=[]}=(0,y.bX)(),[a,n]=(0,i.useState)(null!==(e=Number(localStorage.getItem("sortBy")))&&void 0!==e?e:N.PE.DateNewestFirst),[r,o]=(0,i.useState)(t),{data:c}=(0,f.useSession)();!function(e){let{sortBy:s,data:t,setData:l}=e;(0,i.useEffect)(()=>{let e=[...t];s===N.PE.NameAZ?l(e.sort((e,s)=>e.name.localeCompare(s.name))):s===N.PE.DescriptionAZ?l(e.sort((e,s)=>e.description.localeCompare(s.description))):s===N.PE.NameZA?l(e.sort((e,s)=>s.name.localeCompare(e.name))):s===N.PE.DescriptionZA?l(e.sort((e,s)=>s.description.localeCompare(e.description))):s===N.PE.DateNewestFirst?l(e.sort((e,s)=>new Date(s.createdAt).getTime()-new Date(e.createdAt).getTime())):s===N.PE.DateOldestFirst&&l(e.sort((e,s)=>new Date(e.createdAt).getTime()-new Date(s.createdAt).getTime()))},[s,t])}({sortBy:a,setData:o,data:t});let[d,m]=(0,i.useState)(!1);return(0,l.jsxs)(v.Z,{children:[(0,l.jsxs)("div",{className:"p-5 flex flex-col gap-5 w-full h-full",children:[(0,l.jsxs)("div",{className:"flex justify-between",children:[(0,l.jsx)(_.Z,{icon:"bi-folder",title:s("collections"),description:s("collections_you_own")}),(0,l.jsx)("div",{className:"flex gap-3 justify-end",children:(0,l.jsx)("div",{className:"relative mt-2",children:(0,l.jsx)(g.Z,{sortBy:a,setSort:n,t:s})})})]}),(0,l.jsxs)("div",{className:"grid min-[1900px]:grid-cols-4 2xl:grid-cols-3 sm:grid-cols-2 grid-cols-1 gap-5",children:[r.filter(e=>e.ownerId===(null==c?void 0:c.user.id)&&null===e.parentId).map((e,s)=>(0,l.jsx)(j,{collection:e},s)),(0,l.jsxs)("div",{className:"card card-compact shadow-md hover:shadow-none duration-200 border border-neutral-content p-5 bg-base-200 self-stretch min-h-[12rem] rounded-2xl cursor-pointer flex flex-col gap-4 justify-center items-center group btn",onClick:()=>m(!0),children:[(0,l.jsx)("p",{className:"group-hover:opacity-0 duration-100",children:s("new_collection")}),(0,l.jsx)("i",{className:"bi-plus-lg text-5xl group-hover:text-7xl group-hover:-mt-6 text-primary drop-shadow duration-100"})]})]}),r.filter(e=>e.ownerId!==(null==c?void 0:c.user.id))[0]?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(_.Z,{icon:"bi-folder",title:s("other_collections"),description:s("other_collections_desc")}),(0,l.jsx)("div",{className:"grid min-[1900px]:grid-cols-4 2xl:grid-cols-3 sm:grid-cols-2 grid-cols-1 gap-5",children:r.filter(e=>e.ownerId!==(null==c?void 0:c.user.id)).map((e,s)=>(0,l.jsx)(j,{collection:e},s))})]}):void 0]}),d?(0,l.jsx)(w.Z,{onClose:()=>m(!1)}):void 0]})}}},function(e){e.O(0,[517,664,675,584,832,797,598,465,128,774,888,179],function(){return e(e.s=3256)}),_N_E=e.O()}]);