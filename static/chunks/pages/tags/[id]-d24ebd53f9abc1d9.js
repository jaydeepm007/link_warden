(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[476],{3328:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/tags/[id]",function(){return n(1930)}])},1930:function(e,t,n){"use strict";n.r(t),n.d(t,{__N_SSP:function(){return p},default:function(){return f}});var s=n(5893),a=n(1163),l=n(7294),i=n(8465),r=n(7102),d=n(6496),o=n(8229),u=n(654),c=n(2890),m=n(8276),x=n(148),h=n(4806),b=n(1821),v=n(6501),p=!0;function f(){var e;let{t}=(0,m.$G)(),n=(0,a.useRouter)(),{data:p=[]}=(0,h.e0)(),f=(0,h.yi)(),g=(0,h.nY)(),[N,j]=(0,l.useState)(null!==(e=Number(localStorage.getItem("sortBy")))&&void 0!==e?e:r.PE.DateNewestFirst),[w,_]=(0,l.useState)(!1),[y,S]=(0,l.useState)(),[P,Z]=(0,l.useState)(),[E,k]=(0,l.useState)(!1),[C,M]=(0,l.useState)(!1),[q,I]=(0,l.useState)(!1);(0,l.useEffect)(()=>{if(q)return I(!1)},[n]);let{links:D,data:F}=(0,d.u8)({sort:N,tagId:Number(n.query.id)});(0,l.useEffect)(()=>{let e=p.find(e=>e.id===Number(n.query.id));if(p.length>0&&!(null==e?void 0:e.id)){n.push("/dashboard");return}Z(e)},[n,p,Number(n.query.id),Z]),(0,l.useEffect)(()=>{S(null==P?void 0:P.name)},[P]);let[B,O]=(0,l.useState)(!1),z=async()=>{S(null==P?void 0:P.name),_(!1)},A=async e=>{if(null==e||e.preventDefault(),(null==P?void 0:P.name)===y)return _(!1);if(""===y)return z();if(O(!0),P&&y){let e=v.ZP.loading(t("applying_changes"));await f.mutateAsync({...P,name:y},{onSettled:(n,s)=>{v.ZP.dismiss(e),s?v.ZP.error(s.message):v.ZP.success(t("tag_renamed"))}})}O(!1),_(!1)},T=async()=>{if(O(!0),null==P?void 0:P.id){let e=v.ZP.loading(t("applying_changes"));await g.mutateAsync(null==P?void 0:P.id,{onSettled:(s,a)=>{v.ZP.dismiss(e),a?v.ZP.error(a.message):(v.ZP.success(t("tag_deleted")),n.push("/links"))}})}O(!1),_(!1)},[X,G]=(0,l.useState)(localStorage.getItem("viewMode")||r.wO.Card);return(0,s.jsxs)(i.Z,{children:[(0,s.jsxs)("div",{className:"p-5 flex flex-col gap-5 w-full",children:[(0,s.jsx)(x.Z,{t:t,viewMode:X,setViewMode:G,sortBy:N,setSortBy:j,editMode:q,setEditMode:I,children:(0,s.jsx)("div",{className:"flex gap-3 items-center",children:(0,s.jsxs)("div",{className:"flex gap-2 items-center font-thin",children:[(0,s.jsx)("i",{className:"bi-hash text-primary text-3xl"}),w?(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)("form",{onSubmit:A,className:"flex items-center gap-2",children:[(0,s.jsx)("input",{type:"text",autoFocus:!0,className:"sm:text-3xl text-2xl bg-transparent h-10 w-3/4 outline-none border-b border-b-neutral-content",value:y,onChange:e=>S(e.target.value)}),(0,s.jsx)("div",{onClick:()=>A(),id:"expand-dropdown",className:"btn btn-ghost btn-square btn-sm",children:(0,s.jsx)("i",{className:"bi-check text-neutral text-2xl"})}),(0,s.jsx)("div",{onClick:()=>z(),id:"expand-dropdown",className:"btn btn-ghost btn-square btn-sm",children:(0,s.jsx)("i",{className:"bi-x text-neutral text-2xl"})})]})}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("p",{className:"sm:text-3xl text-2xl capitalize",children:null==P?void 0:P.name}),(0,s.jsx)("div",{className:"relative",children:(0,s.jsxs)("div",{className:"dropdown dropdown-bottom font-normal ".concat((null==P?void 0:P.name.length)&&(null==P?void 0:P.name.length)>8?"dropdown-end":""),children:[(0,s.jsx)("div",{tabIndex:0,role:"button",onMouseDown:o.Mm,className:"btn btn-ghost btn-sm btn-square text-neutral",children:(0,s.jsx)("i",{className:"bi-three-dots text-neutral text-2xl"})}),(0,s.jsxs)("ul",{className:"dropdown-content z-[30] menu shadow bg-base-200 border border-neutral-content rounded-box mt-1",children:[(0,s.jsx)("li",{children:(0,s.jsx)("div",{role:"button",tabIndex:0,onClick:()=>{var e,t;null===(e=null===(t=document)||void 0===t?void 0:t.activeElement)||void 0===e||e.blur(),_(!0)},className:"whitespace-nowrap",children:t("rename_tag")})}),(0,s.jsx)("li",{children:(0,s.jsx)("div",{role:"button",tabIndex:0,onClick:()=>{var e,t;null===(e=null===(t=document)||void 0===t?void 0:t.activeElement)||void 0===e||e.blur(),T()},className:"whitespace-nowrap",children:t("delete_tag")})})]})]})})]})]})})}),(0,s.jsx)(b.ZP,{editMode:q,links:D,layout:X,placeholderCount:1,useData:F})]}),E&&(0,s.jsx)(u.Z,{onClose:()=>{k(!1)}}),C&&(0,s.jsx)(c.Z,{onClose:()=>{M(!1)}})]})}}},function(e){e.O(0,[517,664,675,584,832,385,463,797,598,283,465,907,7,774,888,179],function(){return e(e.s=3328)}),_N_E=e.O()}]);