(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[582],{2133:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/settings/access-tokens",function(){return s(6739)}])},2144:function(e,t,s){"use strict";s.d(t,{Z:function(){return l}});var n=s(5893),r=s(7294);function a(e){let t=0;for(;e;){let s=window.getComputedStyle(e).getPropertyValue("z-index"),n=Number(s);if("auto"!==s&&!isNaN(n)){t=n;break}e=e.parentElement}return t}function l(e){let{children:t,onClickOutside:s,className:l,style:i,onMount:o}=e,c=(0,r.useRef)(null);return(0,r.useEffect)(()=>{function e(e){let t=e.target;if(c.current&&!c.current.contains(t)){let n=a(c.current),r=a(t);r<=n&&s(e)}}return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[c,s]),(0,r.useEffect)(()=>{if(c.current&&o){let e=c.current.getBoundingClientRect();o(e)}},[]),(0,n.jsx)("div",{ref:c,className:l,style:i,children:t})}},7169:function(e,t,s){"use strict";s.d(t,{Z:function(){return i}});var n=s(5893),r=s(7294),a=s(2144),l=s(2314);function i(e){let{toggleModal:t,className:s,children:i,dismissible:o=!0}=e,[c,d]=r.useState(!0);return((0,r.useEffect)(()=>{if(window.innerWidth>=640)return document.body.style.overflow="hidden",document.body.style.position="relative",()=>{document.body.style.overflow="auto",document.body.style.position=""}},[]),window.innerWidth<640)?(0,n.jsx)(l.d.Root,{open:c,onClose:()=>o&&setTimeout(()=>t(),100),dismissible:o,children:(0,n.jsxs)(l.d.Portal,{children:[(0,n.jsx)(l.d.Overlay,{className:"fixed inset-0 bg-black/40"}),(0,n.jsx)(a.Z,{onClickOutside:()=>o&&d(!1),children:(0,n.jsx)(l.d.Content,{className:"flex flex-col rounded-t-2xl min-h-max mt-24 fixed bottom-0 left-0 right-0 z-30",children:(0,n.jsxs)("div",{className:"p-4 bg-base-100 rounded-t-2xl flex-1 border-neutral-content border-t overflow-y-auto","data-testid":"mobile-modal-container",children:[(0,n.jsx)("div",{className:"mx-auto w-12 h-1.5 flex-shrink-0 rounded-full bg-neutral mb-5","data-testid":"mobile-modal-slider"}),i]})})})]})}):(0,n.jsx)("div",{className:"overflow-y-auto pt-2 sm:py-2 fixed top-0 bottom-0 right-0 left-0 bg-black bg-opacity-10 backdrop-blur-sm flex justify-center items-center fade-in z-40","data-testid":"modal-outer",children:(0,n.jsx)(a.Z,{onClickOutside:()=>o&&t(),className:"w-full mt-auto sm:m-auto sm:w-11/12 sm:max-w-2xl ".concat(s||""),children:(0,n.jsxs)("div",{className:"slide-up mt-auto sm:m-auto relative border-neutral-content rounded-t-2xl sm:rounded-2xl border-t sm:border shadow-2xl p-5 bg-base-100 overflow-y-auto sm:overflow-y-visible","data-testid":"modal-container",children:[o&&(0,n.jsx)("div",{onClick:t,className:"absolute top-4 right-3 btn btn-sm outline-none btn-circle btn-ghost z-10",children:(0,n.jsx)("i",{className:"bi-x text-neutral text-2xl","data-testid":"close-modal-button"})}),i]})})})}},4157:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});var n=s(5893);function r(e){let{autoFocus:t,value:s,type:r,placeholder:a,onChange:l,onKeyDown:i,className:o,spellCheck:c,"data-testid":d}=e;return(0,n.jsx)("input",{"data-testid":d,spellCheck:c,autoFocus:t,type:r||"text",placeholder:a,value:s,onChange:l,onKeyDown:i,className:"w-full rounded-md p-2 border-neutral-content border-solid border outline-none focus:border-primary duration-100 ".concat(o||"")})}},7199:function(e,t,s){"use strict";var n=s(5893),r=s(8229),a=s(5139);let l=(0,a.j)("select-none relative duration-200 rounded-lg text-center w-fit flex justify-center items-center gap-2 disabled:pointer-events-none disabled:opacity-50",{variants:{intent:{accent:"bg-accent text-white hover:bg-accent/80 border border-violet-400",primary:"bg-primary text-primary-content hover:bg-primary/80",secondary:"bg-neutral-content text-secondary-foreground hover:bg-neutral-content/80 border border-neutral/30",destructive:"bg-error text-white hover:bg-error/80 border border-neutral/60",outline:"border border-input bg-background hover:bg-accent hover:text-accent-content",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{small:"h-7 px-2",medium:"h-10 px-4 py-2",large:"h-12 px-7 py-2",full:"px-4 py-2 w-full",icon:"h-10 w-10"},loading:{true:"cursor-wait"}},defaultVariants:{intent:"primary",size:"medium"}});t.Z=e=>{let{className:t,intent:s,size:a,children:i,disabled:o,loading:c=!1,...d}=e;return(0,n.jsx)("button",{className:(0,r.cn)(l({intent:s,size:a,className:t})),disabled:c||o,...d,children:i})}},8050:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});var n=s(7294);function r(){let[e,t]=(0,n.useState)({height:window.innerHeight,width:window.innerWidth});return(0,n.useEffect)(()=>{function e(){t({height:window.innerHeight,width:window.innerWidth})}return window.addEventListener("resize",e),()=>{window.removeEventListener("resize",e)}},[]),e}},1633:function(e,t,s){"use strict";s.d(t,{Z:function(){return m}});var n=s(5893),r=s(1664),a=s.n(r),l=s(1163),i=s(7294),o=s(8276),c=s(4155);function d(e){let{className:t}=e,{t:s}=(0,o.$G)(),r=(0,l.useRouter)(),[d,u]=(0,i.useState)("");return(0,i.useEffect)(()=>{u(r.asPath)},[r]),(0,n.jsxs)("div",{className:"bg-base-100 h-full w-64 overflow-y-auto border-solid border border-base-100 border-r-neutral-content p-5 z-20 flex flex-col gap-5 justify-between ".concat(t||""),children:[(0,n.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,n.jsx)(a(),{href:"/settings/account",children:(0,n.jsxs)("div",{className:"".concat("/settings/account"===d?"bg-primary/20":"hover:bg-neutral/20"," duration-100 py-5 px-2 cursor-pointer flex items-center gap-2 w-full rounded-md h-8"),children:[(0,n.jsx)("i",{className:"bi-person text-primary text-2xl"}),(0,n.jsx)("p",{className:"truncate w-full pr-7",children:s("account")})]})}),(0,n.jsx)(a(),{href:"/settings/preference",children:(0,n.jsxs)("div",{className:"".concat("/settings/preference"===d?"bg-primary/20":"hover:bg-neutral/20"," duration-100 py-5 px-2 cursor-pointer flex items-center gap-2 w-full rounded-md h-8"),children:[(0,n.jsx)("i",{className:"bi-sliders text-primary text-2xl"}),(0,n.jsx)("p",{className:"truncate w-full pr-7",children:s("preference")})]})}),(0,n.jsx)(a(),{href:"/settings/access-tokens",children:(0,n.jsxs)("div",{className:"".concat("/settings/access-tokens"===d?"bg-primary/20":"hover:bg-neutral/20"," duration-100 py-5 px-2 cursor-pointer flex items-center gap-2 w-full rounded-md h-8"),children:[(0,n.jsx)("i",{className:"bi-key text-primary text-2xl"}),(0,n.jsx)("p",{className:"truncate w-full pr-7",children:s("access_tokens")})]})}),(0,n.jsx)(a(),{href:"/settings/password",children:(0,n.jsxs)("div",{className:"".concat("/settings/password"===d?"bg-primary/20":"hover:bg-neutral/20"," duration-100 py-5 px-2 cursor-pointer flex items-center gap-2 w-full rounded-md h-8"),children:[(0,n.jsx)("i",{className:"bi-lock text-primary text-2xl"}),(0,n.jsx)("p",{className:"truncate w-full pr-7",children:s("password")})]})}),c.env.NEXT_PUBLIC_STRIPE&&(0,n.jsx)(a(),{href:"/settings/billing",children:(0,n.jsxs)("div",{className:"".concat("/settings/billing"===d?"bg-primary/20":"hover:bg-neutral/20"," duration-100 py-5 px-2 cursor-pointer flex items-center gap-2 w-full rounded-md h-8"),children:[(0,n.jsx)("i",{className:"bi-credit-card text-primary text-xl"}),(0,n.jsx)("p",{className:"truncate w-full pr-7",children:s("billing")})]})})]}),(0,n.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,n.jsx)(a(),{href:"https://github.com/linkwarden/linkwarden/releases",target:"_blank",className:"text-neutral text-sm ml-2 hover:opacity-50 duration-100",children:s("linkwarden_version",{version:"v2.7.1"})}),(0,n.jsx)(a(),{href:"https://docs.linkwarden.app",target:"_blank",children:(0,n.jsxs)("div",{className:"hover:bg-neutral/20 duration-100 py-2 px-2 cursor-pointer flex items-center gap-2 w-full rounded-md h-8",children:[(0,n.jsx)("i",{className:"bi-question-circle text-primary text-xl"}),(0,n.jsx)("p",{className:"truncate w-full pr-7",children:s("help")})]})}),(0,n.jsx)(a(),{href:"https://github.com/linkwarden/linkwarden",target:"_blank",children:(0,n.jsxs)("div",{className:"hover:bg-neutral/20 duration-100 py-2 px-2 cursor-pointer flex items-center gap-2 w-full rounded-md h-8",children:[(0,n.jsx)("i",{className:"bi-github text-primary text-xl"}),(0,n.jsx)("p",{className:"truncate w-full pr-7",children:s("github")})]})}),(0,n.jsx)(a(),{href:"https://twitter.com/LinkwardenHQ",target:"_blank",children:(0,n.jsxs)("div",{className:"hover:bg-neutral/20 duration-100 py-2 px-2 cursor-pointer flex items-center gap-2 w-full rounded-md h-8",children:[(0,n.jsx)("i",{className:"bi-twitter-x text-primary text-xl"}),(0,n.jsx)("p",{className:"truncate w-full pr-7",children:s("twitter")})]})}),(0,n.jsx)(a(),{href:"https://fosstodon.org/@linkwarden",target:"_blank",children:(0,n.jsxs)("div",{className:"hover:bg-neutral/20 duration-100 py-2 px-2 cursor-pointer flex items-center gap-2 w-full rounded-md h-8",children:[(0,n.jsx)("i",{className:"bi-mastodon text-primary text-xl"}),(0,n.jsx)("p",{className:"truncate w-full pr-7",children:s("mastodon")})]})})]})]})}var u=s(2144),x=s(8050);function m(e){let{children:t}=e,s=(0,l.useRouter)(),[r,o]=(0,i.useState)(!1),{width:c}=(0,x.Z)();(0,i.useEffect)(()=>{o(!1)},[c]),(0,i.useEffect)(()=>{o(!1)},[s]);let m=()=>{o(!r)};return(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)("div",{className:"flex max-w-screen-md mx-auto",children:[(0,n.jsx)("div",{className:"hidden lg:block fixed h-screen",children:(0,n.jsx)(d,{})}),(0,n.jsxs)("div",{className:"w-full min-h-screen p-5 lg:ml-64",children:[(0,n.jsxs)("div",{className:"gap-2 inline-flex mr-3",children:[(0,n.jsx)("div",{onClick:m,className:"text-neutral btn btn-square btn-sm btn-ghost lg:hidden",children:(0,n.jsx)("i",{className:"bi-list text-2xl leading-none"})}),(0,n.jsx)(a(),{href:"/dashboard",className:"text-neutral btn btn-square btn-sm btn-ghost",children:(0,n.jsx)("i",{className:"bi-chevron-left text-xl"})})]}),t,r?(0,n.jsx)("div",{className:"fixed top-0 bottom-0 right-0 left-0 bg-black bg-opacity-10 backdrop-blur-sm flex items-center fade-in z-30",children:(0,n.jsx)(u.Z,{className:"h-full",onClickOutside:m,children:(0,n.jsx)("div",{className:"slide-right h-full shadow-lg",children:(0,n.jsx)(d,{})})})}):null]})]})})}},6739:function(e,t,s){"use strict";s.r(t),s.d(t,{__N_SSP:function(){return y},default:function(){return N}});var n=s(5893),r=s(1633),a=s(7294),l=s(4157),i=s(7102),o=s(6501),c=s(7169),d=s(8229),u=s(7199),x=s(8276),m=s(8551),h=s(202),p=s(8029),b=s(3299);let f=()=>{let{status:e}=(0,b.useSession)();return(0,m.a)({queryKey:["tokens"],queryFn:async()=>{let e=await fetch("/api/v1/tokens");if(!e.ok)throw Error("Failed to fetch tokens.");let t=await e.json();return t.response},enabled:"authenticated"===e})},j=()=>{let e=(0,h.NL)();return(0,p.D)({mutationFn:async e=>{let t=await fetch("/api/v1/tokens",{body:JSON.stringify(e),method:"POST"}),s=await t.json();if(!t.ok)throw Error(s.response);return s.response},onSuccess:t=>{e.setQueryData(["tokens"],e=>[...e,t.token])}})},v=()=>{let e=(0,h.NL)();return(0,p.D)({mutationFn:async e=>{let t=await fetch("/api/v1/tokens/".concat(e),{method:"DELETE"}),s=await t.json();if(!t.ok)throw Error(s.response);return s.response},onSuccess:(t,s)=>{e.setQueryData(["tokens"],e=>e.filter(e=>e.id!==s))}})};function g(e){let{onClose:t}=e,{t:s}=(0,x.$G)(),[r,m]=(0,a.useState)(""),h=j(),[p,b]=(0,a.useState)({name:"",expires:0}),[f,v]=(0,a.useState)(!1),g=async()=>{if(!f){v(!0);let e=o.ZP.loading(s("creating_token"));await h.mutateAsync(p,{onSettled:(t,s)=>{o.ZP.dismiss(e),s?o.ZP.error(s.message):m(t.secretKey)}}),v(!1)}};return(0,n.jsx)(c.Z,{toggleModal:t,children:r?(0,n.jsxs)("div",{className:"flex flex-col justify-center space-y-4",children:[(0,n.jsx)("p",{className:"text-xl font-thin",children:s("access_token_created")}),(0,n.jsx)("p",{children:s("token_creation_notice")}),(0,n.jsx)(l.Z,{spellCheck:!1,value:r,onChange:()=>{},className:"w-full"}),(0,n.jsx)("button",{onClick:()=>{navigator.clipboard.writeText(r),o.ZP.success(s("copied_to_clipboard"))},className:"btn btn-primary w-fit mx-auto",children:s("copy_to_clipboard")})]}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("p",{className:"text-xl font-thin",children:s("create_access_token")}),(0,n.jsx)("div",{className:"divider mb-3 mt-1"}),(0,n.jsxs)("div",{className:"flex sm:flex-row flex-col gap-2 items-center",children:[(0,n.jsxs)("div",{className:"w-full",children:[(0,n.jsx)("p",{className:"mb-2",children:s("name")}),(0,n.jsx)(l.Z,{value:p.name,onChange:e=>b({...p,name:e.target.value}),placeholder:s("token_name_placeholder"),className:"bg-base-200"})]}),(0,n.jsxs)("div",{className:"w-full sm:w-fit",children:[(0,n.jsx)("p",{className:"mb-2",children:s("expires_in")}),(0,n.jsxs)("div",{className:"dropdown dropdown-bottom dropdown-end w-full",children:[(0,n.jsx)(u.Z,{tabIndex:0,role:"button",intent:"secondary",onMouseDown:d.Mm,className:"whitespace-nowrap w-32",children:(e=>{switch(e){case i.VS.sevenDays:return s("7_days");case i.VS.oneMonth:return s("30_days");case i.VS.twoMonths:return s("60_days");case i.VS.threeMonths:return s("90_days");case i.VS.never:return s("no_expiration")}})(p.expires)}),(0,n.jsxs)("ul",{className:"dropdown-content z-[30] menu shadow bg-base-200 border border-neutral-content rounded-xl mt-1",children:[(0,n.jsx)("li",{children:(0,n.jsxs)("label",{className:"label cursor-pointer flex justify-start",tabIndex:0,role:"button",children:[(0,n.jsx)("input",{type:"radio",name:"sort-radio",className:"radio checked:bg-primary",checked:p.expires===i.VS.sevenDays,onChange:()=>{var e,t;null===(e=null===(t=document)||void 0===t?void 0:t.activeElement)||void 0===e||e.blur(),b({...p,expires:i.VS.sevenDays})}}),(0,n.jsx)("span",{className:"label-text whitespace-nowrap",children:s("7_days")})]})}),(0,n.jsx)("li",{children:(0,n.jsxs)("label",{className:"label cursor-pointer flex justify-start",tabIndex:0,role:"button",children:[(0,n.jsx)("input",{type:"radio",name:"sort-radio",className:"radio checked:bg-primary",checked:p.expires===i.VS.oneMonth,onChange:()=>{var e,t;null===(e=null===(t=document)||void 0===t?void 0:t.activeElement)||void 0===e||e.blur(),b({...p,expires:i.VS.oneMonth})}}),(0,n.jsx)("span",{className:"label-text whitespace-nowrap",children:s("30_days")})]})}),(0,n.jsx)("li",{children:(0,n.jsxs)("label",{className:"label cursor-pointer flex justify-start",tabIndex:0,role:"button",children:[(0,n.jsx)("input",{type:"radio",name:"sort-radio",className:"radio checked:bg-primary",checked:p.expires===i.VS.twoMonths,onChange:()=>{var e,t;null===(e=null===(t=document)||void 0===t?void 0:t.activeElement)||void 0===e||e.blur(),b({...p,expires:i.VS.twoMonths})}}),(0,n.jsx)("span",{className:"label-text whitespace-nowrap",children:s("60_days")})]})}),(0,n.jsx)("li",{children:(0,n.jsxs)("label",{className:"label cursor-pointer flex justify-start",tabIndex:0,role:"button",children:[(0,n.jsx)("input",{type:"radio",name:"sort-radio",className:"radio checked:bg-primary",checked:p.expires===i.VS.threeMonths,onChange:()=>{var e,t;null===(e=null===(t=document)||void 0===t?void 0:t.activeElement)||void 0===e||e.blur(),b({...p,expires:i.VS.threeMonths})}}),(0,n.jsx)("span",{className:"label-text whitespace-nowrap",children:s("90_days")})]})}),(0,n.jsx)("li",{children:(0,n.jsxs)("label",{className:"label cursor-pointer flex justify-start",tabIndex:0,role:"button",children:[(0,n.jsx)("input",{type:"radio",name:"sort-radio",className:"radio checked:bg-primary",checked:p.expires===i.VS.never,onChange:()=>{var e,t;null===(e=null===(t=document)||void 0===t?void 0:t.activeElement)||void 0===e||e.blur(),b({...p,expires:i.VS.never})}}),(0,n.jsx)("span",{className:"label-text whitespace-nowrap",children:s("no_expiration")})]})})]})]})]})]}),(0,n.jsx)("div",{className:"flex justify-end items-center mt-5",children:(0,n.jsx)("button",{className:"btn btn-accent dark:border-violet-400 text-white",onClick:g,children:s("create_token")})})]})})}function w(e){let{onClose:t,activeToken:s}=e,{t:r}=(0,x.$G)(),[l,i]=(0,a.useState)(s),d=v();(0,a.useEffect)(()=>{i(s)},[s]);let m=async()=>{let e=o.ZP.loading(r("deleting"));await d.mutateAsync(l.id,{onSettled:(s,n)=>{o.ZP.dismiss(e),n?o.ZP.error(n.message):(t(),o.ZP.success(r("token_revoked")))}})};return(0,n.jsxs)(c.Z,{toggleModal:t,children:[(0,n.jsx)("p",{className:"text-xl font-thin text-red-500",children:r("revoke_token")}),(0,n.jsx)("div",{className:"divider mb-3 mt-1"}),(0,n.jsxs)("div",{className:"flex flex-col gap-3",children:[(0,n.jsx)("p",{children:r("revoke_confirmation")}),(0,n.jsxs)(u.Z,{className:"ml-auto",intent:"destructive",onClick:m,children:[(0,n.jsx)("i",{className:"bi-trash text-xl"}),r("revoke")]})]})]})}var y=!0;function N(){let[e,t]=(0,a.useState)(!1),[s,l]=(0,a.useState)(!1),[i,o]=(0,a.useState)(null),{t:c}=(0,x.$G)(),d=e=>{o(e),l(!0)},{data:u=[]}=f();return(0,n.jsxs)(r.Z,{children:[(0,n.jsx)("p",{className:"capitalize text-3xl font-thin inline",children:c("access_tokens")}),(0,n.jsx)("div",{className:"divider my-3"}),(0,n.jsxs)("div",{className:"flex flex-col gap-3",children:[(0,n.jsx)("p",{children:c("access_tokens_description")}),(0,n.jsx)("button",{className:"btn ml-auto btn-accent dark:border-violet-400 text-white tracking-wider w-fit flex items-center gap-2",onClick:()=>{t(!0)},children:c("new_token")}),u.length>0?(0,n.jsxs)("table",{className:"table mt-2 overflow-x-auto",children:[(0,n.jsx)("thead",{children:(0,n.jsxs)("tr",{children:[(0,n.jsx)("th",{children:c("name")}),(0,n.jsx)("th",{children:c("created")}),(0,n.jsx)("th",{children:c("expires")}),(0,n.jsx)("th",{})]})}),(0,n.jsx)("tbody",{children:u.map((e,t)=>(0,n.jsx)(a.Fragment,{children:(0,n.jsxs)("tr",{children:[(0,n.jsx)("td",{className:e.isSession?"text-primary":"",children:e.isSession?(0,n.jsx)("div",{className:"tooltip tooltip-right text-left","data-tip":"This is a permanent session",children:e.name}):e.name}),(0,n.jsx)("td",{children:new Date(e.createdAt||"").toLocaleDateString()}),(0,n.jsx)("td",{children:new Date(e.expires||"").toLocaleDateString()}),(0,n.jsx)("td",{children:(0,n.jsx)("button",{className:"btn btn-sm btn-ghost btn-square hover:bg-red-500",onClick:()=>d(e),children:(0,n.jsx)("i",{className:"bi-x text-lg"})})})]})},t))})]}):void 0]}),e?(0,n.jsx)(g,{onClose:()=>t(!1)}):void 0,s&&i&&(0,n.jsx)(w,{onClose:()=>{l(!1),o(null)},activeToken:i})]})}}},function(e){e.O(0,[664,584,774,888,179],function(){return e(e.s=2133)}),_N_E=e.O()}]);